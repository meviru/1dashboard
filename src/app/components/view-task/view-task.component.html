<!-- Sidebar -->
<p-sidebar position="right" styleClass="custom-sidebar hide-footer" [dismissible]="false" [closeOnEscape]="false"
    [(visible)]="visible" (visibleChange)="onHide($event)">
    <ng-template pTemplate="header">
        <span class="fw-semibold">Task Information</span>
    </ng-template>
    <ng-template pTemplate="content">
        <div class="form-info border-bottom pb-3 my-3">
            <h2 class="form-info--title mb-1 d-flex align-items-center">
                <span>{{task.title}}</span>
                <p-badge styleClass="fw-normal ms-3 mb-1" [value]="task.status.name"></p-badge>
            </h2>
            <p class="form-info--desc text-muted">{{task.description}}</p>
        </div>
        <div class="form-info mb-3 border-bottom pb-3">
            <div class="d-flex align-items-center">
                <h4 class="form-info--title">Created By</h4>
                <p class="form-info--desc text-muted ms-3">{{task.assignee}}</p>
            </div>
            <div class="d-flex align-items-center mt-2">
                <h4 class="form-info--title">Due Date</h4>
                <p class="form-info--desc text-muted ms-3">{{task.due_date | date:'dd MMM yyyy'}}</p>
            </div>
        </div>
        <div class="form-info mb-3 pb-3">
            <h4 class="form-info--title">Subtasks</h4>
            <ul *ngIf="task.sub_tasks && task.sub_tasks.length; else emptyState;" class="list-group my-3">
                <li class="list-group--item d-flex align-items-center justify-content-between"
                    *ngFor="let subtask of task.sub_tasks; let i = index">
                    <div class="list-group--item-left d-flex">
                        <i class="pi pi-file"></i>
                        <div class="list-group--info mx-3 ms-2">
                            <p>{{subtask.title}}</p>
                            <p class="fs-small text-muted opacity-75 mt-1">{{subtask.description}}</p>
                        </div>
                    </div>
                </li>
            </ul>
            <ng-template #emptyState>
                <div class="p-3 pb-0 empty-state-wrapper">
                    <p class="empty-state-wrapper--text text-muted opacity-75">No Subtasks Found</p>
                </div>
            </ng-template>
        </div>
    </ng-template>
</p-sidebar>